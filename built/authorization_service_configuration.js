"use strict";
/*
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the
 * License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var xhr_1 = require("./xhr");
/**
 * The standard base path for well-known resources on domains.
 * See https://tools.ietf.org/html/rfc5785 for more information.
 */
var WELL_KNOWN_PATH = '.well-known';
/**
 * The standard resource under the well known path at which an OpenID Connect
 * discovery document can be found under an issuer's base URI.
 */
var OPENID_CONFIGURATION = 'openid-configuration';
/**
 * Configuration details required to interact with an authorization service.
 *
 * More information at https://openid.net/specs/openid-connect-discovery-1_0-17.html
 */
var AuthorizationServiceConfiguration = /** @class */ (function () {
    function AuthorizationServiceConfiguration(request) {
        this.issuer = request.issuer;
        this.authorizationEndpoint = request.authorization_endpoint;
        this.tokenEndpoint = request.token_endpoint;
        this.revocationEndpoint = request.revocation_endpoint;
        this.userInfoEndpoint = request.userinfo_endpoint;
        this.endSessionEndpoint = request.end_session_endpoint;
        this.jwksUri = request.jwks_uri;
        this.registrationEndpoint = request.registration_endpoint;
        this.scopesSupported = request.scopes_supported;
        this.responseTypesSupported = request.response_types_supported;
        this.responseModesSupported = request.response_modes_supported;
        this.grantTypesSupported = request.grant_types_supported;
        this.acrValuesSupported = request.acr_values_supported;
        this.subjectTypesSupported = request.subject_types_supported;
        this.idTokenSigningAlgValuesSupported = request.id_token_signing_alg_values_supported;
        this.idTokenEncryptionAlgValuesSupported = request.id_token_encryption_alg_values_supported;
        this.idTokenEncryptionEncValuesSupported = request.id_token_encryption_enc_values_supported;
        this.userinfoSigningAlgValuesSupported = request.userinfo_signing_alg_values_supported;
        this.userinfoEncryptionAlgValuesSupported = request.userinfo_encryption_alg_values_supported;
        this.userinfoEncryptionEncValuesSupported = request.userinfo_encryption_enc_values_supported;
        this.requestObjectSigningAlgValuesSupported =
            request.request_object_signing_alg_values_supported;
        this.requestObjectEncryptionAlgValuesSupported =
            request.request_object_encryption_alg_values_supported;
        this.requestObjectEncryptionEncValuesSupported =
            request.request_object_encryption_enc_values_supported;
        this.tokenEndpointAuthMethodsSupported = request.token_endpoint_auth_methods_supported;
        this.tokenEndpointAuthSigningAlgValuesSupported =
            request.token_endpoint_auth_signing_alg_values_supported;
        this.displayValuesSupported = request.display_values_supported;
        this.claimTypesSupported = request.claim_types_supported;
        this.claimsSupported = request.claims_supported;
        this.serviceDocumentation = request.service_documentation;
        this.claimsLocalesSupported = request.claims_locales_supported;
        this.uiLocalesSupported = request.ui_locales_supported;
        this.claimsParameterSupported = request.claims_parameter_supported;
        this.requestParameterSupported = request.request_parameter_supported;
        this.requestUriParameterSupported = request.request_uri_parameter_supported;
        this.requireRequestUriRegistration = request.require_request_uri_registration;
        this.opPolicyUri = request.op_policy_uri;
        this.opTosUri = request.op_tos_uri;
    }
    AuthorizationServiceConfiguration.prototype.toJson = function () {
        return {
            issuer: this.issuer,
            authorization_endpoint: this.authorizationEndpoint,
            token_endpoint: this.tokenEndpoint,
            revocation_endpoint: this.revocationEndpoint,
            end_session_endpoint: this.endSessionEndpoint,
            userinfo_endpoint: this.userInfoEndpoint,
            jwks_uri: this.jwksUri,
            registration_endpoint: this.registrationEndpoint,
            scopes_supported: this.scopesSupported,
            response_types_supported: this.responseTypesSupported,
            response_modes_supported: this.responseModesSupported,
            grant_types_supported: this.grantTypesSupported,
            acr_values_supported: this.acrValuesSupported,
            subject_types_supported: this.subjectTypesSupported,
            id_token_signing_alg_values_supported: this.idTokenSigningAlgValuesSupported,
            id_token_encryption_alg_values_supported: this.idTokenEncryptionAlgValuesSupported,
            id_token_encryption_enc_values_supported: this.idTokenEncryptionEncValuesSupported,
            userinfo_signing_alg_values_supported: this.userinfoSigningAlgValuesSupported,
            userinfo_encryption_alg_values_supported: this.userinfoEncryptionAlgValuesSupported,
            userinfo_encryption_enc_values_supported: this.userinfoEncryptionEncValuesSupported,
            request_object_signing_alg_values_supported: this.requestObjectSigningAlgValuesSupported,
            request_object_encryption_alg_values_supported: this.requestObjectEncryptionAlgValuesSupported,
            request_object_encryption_enc_values_supported: this.requestObjectEncryptionEncValuesSupported,
            token_endpoint_auth_methods_supported: this.tokenEndpointAuthMethodsSupported,
            token_endpoint_auth_signing_alg_values_supported: this.tokenEndpointAuthSigningAlgValuesSupported,
            display_values_supported: this.displayValuesSupported,
            claim_types_supported: this.claimTypesSupported,
            claims_supported: this.claimsSupported,
            service_documentation: this.serviceDocumentation,
            claims_locales_supported: this.claimsLocalesSupported,
            ui_locales_supported: this.uiLocalesSupported,
            claims_parameter_supported: this.claimsParameterSupported,
            request_parameter_supported: this.requestParameterSupported,
            request_uri_parameter_supported: this.requestUriParameterSupported,
            require_request_uri_registration: this.requireRequestUriRegistration,
            op_policy_uri: this.opPolicyUri,
            op_tos_uri: this.opTosUri
        };
    };
    AuthorizationServiceConfiguration.fetchFromIssuer = function (openIdIssuerUrl, requestor) {
        var fullUrl = openIdIssuerUrl + "/" + WELL_KNOWN_PATH + "/" + OPENID_CONFIGURATION;
        var requestorToUse = requestor || new xhr_1.JQueryRequestor();
        return requestorToUse
            .xhr({ url: fullUrl, dataType: 'json' })
            .then(function (json) { return new AuthorizationServiceConfiguration(json); });
    };
    return AuthorizationServiceConfiguration;
}());
exports.AuthorizationServiceConfiguration = AuthorizationServiceConfiguration;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0aG9yaXphdGlvbl9zZXJ2aWNlX2NvbmZpZ3VyYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvYXV0aG9yaXphdGlvbl9zZXJ2aWNlX2NvbmZpZ3VyYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7R0FZRzs7QUFJSCw2QkFBaUQ7QUE4Q2pEOzs7R0FHRztBQUNILElBQU0sZUFBZSxHQUFHLGFBQWEsQ0FBQztBQUV0Qzs7O0dBR0c7QUFDSCxJQUFNLG9CQUFvQixHQUFHLHNCQUFzQixDQUFDO0FBRXBEOzs7O0dBSUc7QUFDSDtJQXVDRSwyQ0FBWSxPQUE4QztRQUN4RCxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDN0IsSUFBSSxDQUFDLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztRQUM1RCxJQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUM7UUFDNUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztRQUN0RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ2xELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUM7UUFDdkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUM7UUFDMUQsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7UUFDaEQsSUFBSSxDQUFDLHNCQUFzQixHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztRQUMvRCxJQUFJLENBQUMsc0JBQXNCLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDO1FBQy9ELElBQUksQ0FBQyxtQkFBbUIsR0FBRyxPQUFPLENBQUMscUJB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QVMsSUFBSSxJQUFJLHFCQUFlLEVBQUUsQ0FBQztRQUUxRCxPQUFPLGNBQWM7YUFDaEIsR0FBRyxDQUF3QyxFQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBQyxDQUFDO2FBQzVFLElBQUksQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksaUNBQWlDLENBQUMsSUFBSSxDQUFDLEVBQTNDLENBQTJDLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBQ0gsd0NBQUM7QUFBRCxDQUFDLEFBMUlELElBMElDO0FBMUlZLDhFQUFpQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0XG4gKiBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlXG4gKiBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Jvb2xlYW59IGZyb20gJ2pvaSc7XG5cbmltcG9ydCB7SlF1ZXJ5UmVxdWVzdG9yLCBSZXF1ZXN0b3J9IGZyb20gJy4veGhyJztcblxuXG4vKipcbiAqIFJlcHJlc2VudHMgQXV0aG9yaXphdGlvblNlcnZpY2VDb25maWd1cmF0aW9uIGFzIGEgSlNPTiBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aG9yaXphdGlvblNlcnZpY2VDb25maWd1cmF0aW9uSnNvbiB7XG4gIGlzc3Vlcj86IHN0cmluZztcbiAgYXV0aG9yaXphdGlvbl9lbmRwb2ludDogc3RyaW5nO1xuICB0b2tlbl9lbmRwb2ludDogc3RyaW5nO1xuICByZXZvY2F0aW9uX2VuZHBvaW50OiBzdHJpbmc7XG4gIGVuZF9zZXNzaW9uX2VuZHBvaW50Pzogc3RyaW5nO1xuICB1c2VyaW5mb19lbmRwb2ludD86IHN0cmluZztcbiAgandrc191cmk/OiBzdHJpbmc7XG4gIHJlZ2lzdHJhdGlvbl9lbmRwb2ludD86IHN0cmluZztcbiAgc2NvcGVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXNwb25zZV90eXBlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgcmVzcG9uc2VfbW9kZXNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGdyYW50X3R5cGVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBhY3JfdmFsdWVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBzdWJqZWN0X3R5cGVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBpZF90b2tlbl9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGlkX3Rva2VuX2VuY3J5cHRpb25fYWxnX3ZhbHVlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgaWRfdG9rZW5fZW5jcnlwdGlvbl9lbmNfdmFsdWVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICB1c2VyaW5mb19zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIHVzZXJpbmZvX2VuY3J5cHRpb25fYWxnX3ZhbHVlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgdXNlcmluZm9fZW5jcnlwdGlvbl9lbmNfdmFsdWVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXF1ZXN0X29iamVjdF9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIHJlcXVlc3Rfb2JqZWN0X2VuY3J5cHRpb25fYWxnX3ZhbHVlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgcmVxdWVzdF9vYmplY3RfZW5jcnlwdGlvbl9lbmNfdmFsdWVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZHNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIHRva2VuX2VuZHBvaW50X2F1dGhfc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBkaXNwbGF5X3ZhbHVlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgY2xhaW1fdHlwZXNfc3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGNsYWltc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgc2VydmljZV9kb2N1bWVudGF0aW9uPzogc3RyaW5nO1xuICBjbGFpbXNfbG9jYWxlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgdWlfbG9jYWxlc19zdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgY2xhaW1zX3BhcmFtZXRlcl9zdXBwb3J0ZWQ/OiBib29sZWFuO1xuICByZXF1ZXN0X3BhcmFtZXRlcl9zdXBwb3J0ZWQ/OiBib29sZWFuO1xuICByZXF1ZXN0X3VyaV9wYXJhbWV0ZXJfc3VwcG9ydGVkPzogYm9vbGVhbjtcbiAgcmVxdWlyZV9yZXF1ZXN0X3VyaV9yZWdpc3RyYXRpb24/OiBib29sZWFuO1xuICBvcF9wb2xpY3lfdXJpPzogc3RyaW5nO1xuICBvcF90b3NfdXJpPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBzdGFuZGFyZCBiYXNlIHBhdGggZm9yIHdlbGwta25vd24gcmVzb3VyY2VzIG9uIGRvbWFpbnMuXG4gKiBTZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzU3ODUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IFdFTExfS05PV05fUEFUSCA9ICcud2VsbC1rbm93bic7XG5cbi8qKlxuICogVGhlIHN0YW5kYXJkIHJlc291cmNlIHVuZGVyIHRoZSB3ZWxsIGtub3duIHBhdGggYXQgd2hpY2ggYW4gT3BlbklEIENvbm5lY3RcbiAqIGRpc2NvdmVyeSBkb2N1bWVudCBjYW4gYmUgZm91bmQgdW5kZXIgYW4gaXNzdWVyJ3MgYmFzZSBVUkkuXG4gKi9cbmNvbnN0IE9QRU5JRF9DT05GSUdVUkFUSU9OID0gJ29wZW5pZC1jb25maWd1cmF0aW9uJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGRldGFpbHMgcmVxdWlyZWQgdG8gaW50ZXJhY3Qgd2l0aCBhbiBhdXRob3JpemF0aW9uIHNlcnZpY2UuXG4gKlxuICogTW9yZSBpbmZvcm1hdGlvbiBhdCBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtZGlzY292ZXJ5LTFfMC0xNy5odG1sXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRob3JpemF0aW9uU2VydmljZUNvbmZpZ3VyYXRpb24ge1xuICBpc3N1ZXI/OiBzdHJpbmc7XG4gIGF1dGhvcml6YXRpb25FbmRwb2ludDogc3RyaW5nO1xuICB0b2tlbkVuZHBvaW50OiBzdHJpbmc7XG4gIHJldm9jYXRpb25FbmRwb2ludDogc3RyaW5nO1xuICB1c2VySW5mb0VuZHBvaW50Pzogc3RyaW5nO1xuICBlbmRTZXNzaW9uRW5kcG9pbnQ/OiBzdHJpbmc7XG4gIGp3a3NVcmk/OiBzdHJpbmc7XG4gIHJlZ2lzdHJhdGlvbkVuZHBvaW50Pzogc3RyaW5nO1xuICBzY29wZXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgcmVzcG9uc2VUeXBlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXNwb25zZU1vZGVzU3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGdyYW50VHlwZXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgYWNyVmFsdWVzU3VwcG9ydGVkPzogc3RyaW5nW107XG4gIHN1YmplY3RUeXBlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBpZFRva2VuU2lnbmluZ0FsZ1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBpZFRva2VuRW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBpZFRva2VuRW5jcnlwdGlvbkVuY1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICB1c2VyaW5mb1NpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgdXNlcmluZm9FbmNyeXB0aW9uQWxnVmFsdWVzU3VwcG9ydGVkPzogc3RyaW5nW107XG4gIHVzZXJpbmZvRW5jcnlwdGlvbkVuY1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXF1ZXN0T2JqZWN0U2lnbmluZ0FsZ1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXF1ZXN0T2JqZWN0RW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICByZXF1ZXN0T2JqZWN0RW5jcnlwdGlvbkVuY1ZhbHVlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICB0b2tlbkVuZHBvaW50QXV0aE1ldGhvZHNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgdG9rZW5FbmRwb2ludEF1dGhTaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGRpc3BsYXlWYWx1ZXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgY2xhaW1UeXBlc1N1cHBvcnRlZD86IHN0cmluZ1tdO1xuICBjbGFpbXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgc2VydmljZURvY3VtZW50YXRpb24/OiBzdHJpbmc7XG4gIGNsYWltc0xvY2FsZXNTdXBwb3J0ZWQ/OiBzdHJpbmdbXTtcbiAgdWlMb2NhbGVzU3VwcG9ydGVkPzogc3RyaW5nW107XG4gIGNsYWltc1BhcmFtZXRlclN1cHBvcnRlZD86IGJvb2xlYW47XG4gIHJlcXVlc3RQYXJhbWV0ZXJTdXBwb3J0ZWQ/OiBib29sZWFuO1xuICByZXF1ZXN0VXJpUGFyYW1ldGVyU3VwcG9ydGVkPzogYm9vbGVhbjtcbiAgcmVxdWlyZVJlcXVlc3RVcmlSZWdpc3RyYXRpb24/OiBib29sZWFuO1xuICBvcFBvbGljeVVyaT86IHN0cmluZztcbiAgb3BUb3NVcmk/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocmVxdWVzdDogQXV0aG9yaXphdGlvblNlcnZpY2VDb25maWd1cmF0aW9uSnNvbikge1xuICAgIHRoaXMuaXNzdWVyID0gcmVxdWVzdC5pc3N1ZXI7XG4gICAgdGhpcy5hdXRob3JpemF0aW9uRW5kcG9pbnQgPSByZXF1ZXN0LmF1dGhvcml6YXRpb25fZW5kcG9pbnQ7XG4gICAgdGhpcy50b2tlbkVuZHBvaW50ID0gcmVxdWVzdC50b2tlbl9lbmRwb2ludDtcbiAgICB0aGlzLnJldm9jYXRpb25FbmRwb2ludCA9IHJlcXVlc3QucmV2b2NhdGlvbl9lbmRwb2ludDtcbiAgICB0aGlzLnVzZXJJbmZvRW5kcG9pbnQgPSByZXF1ZXN0LnVzZXJpbmZvX2VuZHBvaW50O1xuICAgIHRoaXMuZW5kU2Vzc2lvbkVuZHBvaW50ID0gcmVxdWVzdC5lbmRfc2Vzc2lvbl9lbmRwb2ludDtcbiAgICB0aGlzLmp3a3NVcmkgPSByZXF1ZXN0Lmp3a3NfdXJpO1xuICAgIHRoaXMucmVnaXN0cmF0aW9uRW5kcG9pbnQgPSByZXF1ZXN0LnJlZ2lzdHJhdGlvbl9lbmRwb2ludDtcbiAgICB0aGlzLnNjb3Blc1N1cHBvcnRlZCA9IHJlcXVlc3Quc2NvcGVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLnJlc3BvbnNlVHlwZXNTdXBwb3J0ZWQgPSByZXF1ZXN0LnJlc3BvbnNlX3R5cGVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLnJlc3BvbnNlTW9kZXNTdXBwb3J0ZWQgPSByZXF1ZXN0LnJlc3BvbnNlX21vZGVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLmdyYW50VHlwZXNTdXBwb3J0ZWQgPSByZXF1ZXN0LmdyYW50X3R5cGVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLmFjclZhbHVlc1N1cHBvcnRlZCA9IHJlcXVlc3QuYWNyX3ZhbHVlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5zdWJqZWN0VHlwZXNTdXBwb3J0ZWQgPSByZXF1ZXN0LnN1YmplY3RfdHlwZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMuaWRUb2tlblNpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWQgPSByZXF1ZXN0LmlkX3Rva2VuX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5pZFRva2VuRW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZCA9IHJlcXVlc3QuaWRfdG9rZW5fZW5jcnlwdGlvbl9hbGdfdmFsdWVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLmlkVG9rZW5FbmNyeXB0aW9uRW5jVmFsdWVzU3VwcG9ydGVkID0gcmVxdWVzdC5pZF90b2tlbl9lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMudXNlcmluZm9TaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkID0gcmVxdWVzdC51c2VyaW5mb19zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMudXNlcmluZm9FbmNyeXB0aW9uQWxnVmFsdWVzU3VwcG9ydGVkID0gcmVxdWVzdC51c2VyaW5mb19lbmNyeXB0aW9uX2FsZ192YWx1ZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMudXNlcmluZm9FbmNyeXB0aW9uRW5jVmFsdWVzU3VwcG9ydGVkID0gcmVxdWVzdC51c2VyaW5mb19lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMucmVxdWVzdE9iamVjdFNpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWQgPVxuICAgICAgICByZXF1ZXN0LnJlcXVlc3Rfb2JqZWN0X3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5yZXF1ZXN0T2JqZWN0RW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZCA9XG4gICAgICAgIHJlcXVlc3QucmVxdWVzdF9vYmplY3RfZW5jcnlwdGlvbl9hbGdfdmFsdWVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLnJlcXVlc3RPYmplY3RFbmNyeXB0aW9uRW5jVmFsdWVzU3VwcG9ydGVkID1cbiAgICAgICAgcmVxdWVzdC5yZXF1ZXN0X29iamVjdF9lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMudG9rZW5FbmRwb2ludEF1dGhNZXRob2RzU3VwcG9ydGVkID0gcmVxdWVzdC50b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZHNfc3VwcG9ydGVkO1xuICAgIHRoaXMudG9rZW5FbmRwb2ludEF1dGhTaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkID1cbiAgICAgICAgcmVxdWVzdC50b2tlbl9lbmRwb2ludF9hdXRoX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5kaXNwbGF5VmFsdWVzU3VwcG9ydGVkID0gcmVxdWVzdC5kaXNwbGF5X3ZhbHVlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5jbGFpbVR5cGVzU3VwcG9ydGVkID0gcmVxdWVzdC5jbGFpbV90eXBlc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5jbGFpbXNTdXBwb3J0ZWQgPSByZXF1ZXN0LmNsYWltc19zdXBwb3J0ZWQ7XG4gICAgdGhpcy5zZXJ2aWNlRG9jdW1lbnRhdGlvbiA9IHJlcXVlc3Quc2VydmljZV9kb2N1bWVudGF0aW9uO1xuICAgIHRoaXMuY2xhaW1zTG9jYWxlc1N1cHBvcnRlZCA9IHJlcXVlc3QuY2xhaW1zX2xvY2FsZXNfc3VwcG9ydGVkO1xuICAgIHRoaXMudWlMb2NhbGVzU3VwcG9ydGVkID0gcmVxdWVzdC51aV9sb2NhbGVzX3N1cHBvcnRlZDtcbiAgICB0aGlzLmNsYWltc1BhcmFtZXRlclN1cHBvcnRlZCA9IHJlcXVlc3QuY2xhaW1zX3BhcmFtZXRlcl9zdXBwb3J0ZWQ7XG4gICAgdGhpcy5yZXF1ZXN0UGFyYW1ldGVyU3VwcG9ydGVkID0gcmVxdWVzdC5yZXF1ZXN0X3BhcmFtZXRlcl9zdXBwb3J0ZWQ7XG4gICAgdGhpcy5yZXF1ZXN0VXJpUGFyYW1ldGVyU3VwcG9ydGVkID0gcmVxdWVzdC5yZXF1ZXN0X3VyaV9wYXJhbWV0ZXJfc3VwcG9ydGVkO1xuICAgIHRoaXMucmVxdWlyZVJlcXVlc3RVcmlSZWdpc3RyYXRpb24gPSByZXF1ZXN0LnJlcXVpcmVfcmVxdWVzdF91cmlfcmVnaXN0cmF0aW9uO1xuICAgIHRoaXMub3BQb2xpY3lVcmkgPSByZXF1ZXN0Lm9wX3BvbGljeV91cmk7XG4gICAgdGhpcy5vcFRvc1VyaSA9IHJlcXVlc3Qub3BfdG9zX3VyaTtcbiAgfVxuXG4gIHRvSnNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNzdWVyOiB0aGlzLmlzc3VlcixcbiAgICAgIGF1dGhvcml6YXRpb25fZW5kcG9pbnQ6IHRoaXMuYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgdG9rZW5fZW5kcG9pbnQ6IHRoaXMudG9rZW5FbmRwb2ludCxcbiAgICAgIHJldm9jYXRpb25fZW5kcG9pbnQ6IHRoaXMucmV2b2NhdGlvbkVuZHBvaW50LFxuICAgICAgZW5kX3Nlc3Npb25fZW5kcG9pbnQ6IHRoaXMuZW5kU2Vzc2lvbkVuZHBvaW50LFxuICAgICAgdXNlcmluZm9fZW5kcG9pbnQ6IHRoaXMudXNlckluZm9FbmRwb2ludCxcbiAgICAgIGp3a3NfdXJpOiB0aGlzLmp3a3NVcmksXG4gICAgICByZWdpc3RyYXRpb25fZW5kcG9pbnQ6IHRoaXMucmVnaXN0cmF0aW9uRW5kcG9pbnQsXG4gICAgICBzY29wZXNfc3VwcG9ydGVkOiB0aGlzLnNjb3Blc1N1cHBvcnRlZCxcbiAgICAgIHJlc3BvbnNlX3R5cGVzX3N1cHBvcnRlZDogdGhpcy5yZXNwb25zZVR5cGVzU3VwcG9ydGVkLFxuICAgICAgcmVzcG9uc2VfbW9kZXNfc3VwcG9ydGVkOiB0aGlzLnJlc3BvbnNlTW9kZXNTdXBwb3J0ZWQsXG4gICAgICBncmFudF90eXBlc19zdXBwb3J0ZWQ6IHRoaXMuZ3JhbnRUeXBlc1N1cHBvcnRlZCxcbiAgICAgIGFjcl92YWx1ZXNfc3VwcG9ydGVkOiB0aGlzLmFjclZhbHVlc1N1cHBvcnRlZCxcbiAgICAgIHN1YmplY3RfdHlwZXNfc3VwcG9ydGVkOiB0aGlzLnN1YmplY3RUeXBlc1N1cHBvcnRlZCxcbiAgICAgIGlkX3Rva2VuX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHRoaXMuaWRUb2tlblNpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWQsXG4gICAgICBpZF90b2tlbl9lbmNyeXB0aW9uX2FsZ192YWx1ZXNfc3VwcG9ydGVkOiB0aGlzLmlkVG9rZW5FbmNyeXB0aW9uQWxnVmFsdWVzU3VwcG9ydGVkLFxuICAgICAgaWRfdG9rZW5fZW5jcnlwdGlvbl9lbmNfdmFsdWVzX3N1cHBvcnRlZDogdGhpcy5pZFRva2VuRW5jcnlwdGlvbkVuY1ZhbHVlc1N1cHBvcnRlZCxcbiAgICAgIHVzZXJpbmZvX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHRoaXMudXNlcmluZm9TaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkLFxuICAgICAgdXNlcmluZm9fZW5jcnlwdGlvbl9hbGdfdmFsdWVzX3N1cHBvcnRlZDogdGhpcy51c2VyaW5mb0VuY3J5cHRpb25BbGdWYWx1ZXNTdXBwb3J0ZWQsXG4gICAgICB1c2VyaW5mb19lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkOiB0aGlzLnVzZXJpbmZvRW5jcnlwdGlvbkVuY1ZhbHVlc1N1cHBvcnRlZCxcbiAgICAgIHJlcXVlc3Rfb2JqZWN0X3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHRoaXMucmVxdWVzdE9iamVjdFNpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWQsXG4gICAgICByZXF1ZXN0X29iamVjdF9lbmNyeXB0aW9uX2FsZ192YWx1ZXNfc3VwcG9ydGVkOlxuICAgICAgICAgIHRoaXMucmVxdWVzdE9iamVjdEVuY3J5cHRpb25BbGdWYWx1ZXNTdXBwb3J0ZWQsXG4gICAgICByZXF1ZXN0X29iamVjdF9lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkOlxuICAgICAgICAgIHRoaXMucmVxdWVzdE9iamVjdEVuY3J5cHRpb25FbmNWYWx1ZXNTdXBwb3J0ZWQsXG4gICAgICB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZHNfc3VwcG9ydGVkOiB0aGlzLnRva2VuRW5kcG9pbnRBdXRoTWV0aG9kc1N1cHBvcnRlZCxcbiAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZDpcbiAgICAgICAgICB0aGlzLnRva2VuRW5kcG9pbnRBdXRoU2lnbmluZ0FsZ1ZhbHVlc1N1cHBvcnRlZCxcbiAgICAgIGRpc3BsYXlfdmFsdWVzX3N1cHBvcnRlZDogdGhpcy5kaXNwbGF5VmFsdWVzU3VwcG9ydGVkLFxuICAgICAgY2xhaW1fdHlwZXNfc3VwcG9ydGVkOiB0aGlzLmNsYWltVHlwZXNTdXBwb3J0ZWQsXG4gICAgICBjbGFpbXNfc3VwcG9ydGVkOiB0aGlzLmNsYWltc1N1cHBvcnRlZCxcbiAgICAgIHNlcnZpY2VfZG9jdW1lbnRhdGlvbjogdGhpcy5zZXJ2aWNlRG9jdW1lbnRhdGlvbixcbiAgICAgIGNsYWltc19sb2NhbGVzX3N1cHBvcnRlZDogdGhpcy5jbGFpbXNMb2NhbGVzU3VwcG9ydGVkLFxuICAgICAgdWlfbG9jYWxlc19zdXBwb3J0ZWQ6IHRoaXMudWlMb2NhbGVzU3VwcG9ydGVkLFxuICAgICAgY2xhaW1zX3BhcmFtZXRlcl9zdXBwb3J0ZWQ6IHRoaXMuY2xhaW1zUGFyYW1ldGVyU3VwcG9ydGVkLFxuICAgICAgcmVxdWVzdF9wYXJhbWV0ZXJfc3VwcG9ydGVkOiB0aGlzLnJlcXVlc3RQYXJhbWV0ZXJTdXBwb3J0ZWQsXG4gICAgICByZXF1ZXN0X3VyaV9wYXJhbWV0ZXJfc3VwcG9ydGVkOiB0aGlzLnJlcXVlc3RVcmlQYXJhbWV0ZXJTdXBwb3J0ZWQsXG4gICAgICByZXF1aXJlX3JlcXVlc3RfdXJpX3JlZ2lzdHJhdGlvbjogdGhpcy5yZXF1aXJlUmVxdWVzdFVyaVJlZ2lzdHJhdGlvbixcbiAgICAgIG9wX3BvbGljeV91cmk6IHRoaXMub3BQb2xpY3lVcmksXG4gICAgICBvcF90b3NfdXJpOiB0aGlzLm9wVG9zVXJpXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBmZXRjaEZyb21Jc3N1ZXIob3BlbklkSXNzdWVyVXJsOiBzdHJpbmcsIHJlcXVlc3Rvcj86IFJlcXVlc3Rvcik6XG4gICAgICBQcm9taXNlPEF1dGhvcml6YXRpb25TZXJ2aWNlQ29uZmlndXJhdGlvbj4ge1xuICAgIGNvbnN0IGZ1bGxVcmwgPSBgJHtvcGVuSWRJc3N1ZXJVcmx9LyR7V0VMTF9LTk9XTl9QQVRIfS8ke09QRU5JRF9DT05GSUdVUkFUSU9OfWA7XG5cbiAgICBjb25zdCByZXF1ZXN0b3JUb1VzZSA9IHJlcXVlc3RvciB8fCBuZXcgSlF1ZXJ5UmVxdWVzdG9yKCk7XG5cbiAgICByZXR1cm4gcmVxdWVzdG9yVG9Vc2VcbiAgICAgICAgLnhocjxBdXRob3JpemF0aW9uU2VydmljZUNvbmZpZ3VyYXRpb25Kc29uPih7dXJsOiBmdWxsVXJsLCBkYXRhVHlwZTogJ2pzb24nfSlcbiAgICAgICAgLnRoZW4oanNvbiA9PiBuZXcgQXV0aG9yaXphdGlvblNlcnZpY2VDb25maWd1cmF0aW9uKGpzb24pKTtcbiAgfVxufVxuIl19